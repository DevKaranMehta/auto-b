{% extends "admin/base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Dashboard Overview</h1>
    <p class="page-subtitle">Welcome back! Here's what's happening with your blockchain news platform.</p>
</div>

<!-- Stats Grid -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 40px;">
    <div class="card">
        <div class="card-body" style="text-align: center;">
            <div style="font-size: 3em; color: #3b82f6; margin-bottom: 10px;">📝</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #1a1a1a;">{{ total_posts }}</div>
            <div style="color: #666; font-size: 1.1em;">Total Posts</div>
        </div>
    </div>

    <div class="card">
        <div class="card-body" style="text-align: center;">
            <div style="font-size: 3em; color: #10b981; margin-bottom: 10px;">🏷️</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #1a1a1a;">{{ total_categories }}</div>
            <div style="color: #666; font-size: 1.1em;">Categories</div>
        </div>
    </div>

    <div class="card">
        <div class="card-body" style="text-align: center;">
            <div style="font-size: 3em; color: #f59e0b; margin-bottom: 10px;">📧</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #1a1a1a;">{{ total_subscribers }}</div>
            <div style="color: #666; font-size: 1.1em;">Subscribers</div>
        </div>
    </div>

    <div class="card">
        <div class="card-body" style="text-align: center;">
            <div style="font-size: 3em; color: #8b5cf6; margin-bottom: 10px;">👁️</div>
            <div style="font-size: 2.5em; font-weight: bold; color: #1a1a1a;">{{ weekly_views }}</div>
            <div style="color: #666; font-size: 1.1em;">Weekly Views</div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card" style="margin-bottom: 40px;">
    <div class="card-header">
        <h3>Quick Actions</h3>
    </div>
    <div class="card-body">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
            <a href="{{ url_for('admin_new_post') }}" class="btn btn-primary" style="padding: 20px; text-align: center; justify-content: center;">
                <div>
                    <div style="font-size: 2em; margin-bottom: 10px;">✏️</div>
                    <div>Create New Post</div>
                </div>
            </a>
            
            <a href="{{ url_for('admin_posts') }}" class="btn btn-secondary" style="padding: 20px; text-align: center; justify-content: center;">
                <div>
                    <div style="font-size: 2em; margin-bottom: 10px;">📄</div>
                    <div>Manage Posts</div>
                </div>
            </a>
            
            <a href="{{ url_for('admin_settings') }}" class="btn btn-secondary" style="padding: 20px; text-align: center; justify-content: center;">
                <div>
                    <div style="font-size: 2em; margin-bottom: 10px;">⚙️</div>
                    <div>Settings</div>
                </div>
            </a>
            
            <a href="{{ url_for('index') }}" target="_blank" class="btn btn-secondary" style="padding: 20px; text-align: center; justify-content: center;">
                <div>
                    <div style="font-size: 2em; margin-bottom: 10px;">🌐</div>
                    <div>View Website</div>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- Recent Posts -->
<div class="card">
    <div class="card-header">
        <h3>Recent Posts</h3>
    </div>
    <div class="card-body">
        {% if recent_posts %}
        <table class="table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Views</th>
                    <th>Created</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for post in recent_posts %}
                <tr>
                    <td>{{ post.title[:50] }}{% if post.title|length > 50 %}...{% endif %}</td>
                    <td>{{ post.category_name or 'No category' }}</td>
                    <td>{{ post.views or 0 }}</td>
                    <td>{{ post.created_at.strftime('%m/%d/%Y') }}</td>
                    <td>
                        <a href="{{ url_for('post_detail', slug=post.slug) }}" target="_blank" class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8em;">View</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div style="text-align: center; padding: 40px; color: #666;">
            <div style="font-size: 3em; margin-bottom: 20px;">📝</div>
            <h3>No posts yet</h3>
            <p>Start creating content for your blockchain news platform.</p>
            <a href="{{ url_for('admin_new_post') }}" class="btn btn-primary" style="margin-top: 20px;">Create First Post</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
